# Lighthouse for Azure Pipelines

This is an Azure DevOps extension that allows you to **enhance your Azure Pipelines with a Lighthouse tab**.
The Lighthouse tab embed one or many HTML reports generated by [Google Lighthouse](https://developers.google.com/web/tools/lighthouse/).

The task only requires a target URL to execute Lighthouse against.

If the [Lighthouse NPM package](https://www.npmjs.com/package/lighthouse) is already installed locally or globally on the agent, then the task will use it.
Otherwise, it will install the latest version in a temporary folder.

![Lighthouse HTML report embed in a tab](https://raw.githubusercontent.com/gsoft-inc/azure-pipelines-lighthouse/master/docs/lh-result.png)

You can also specify **audit rules** that can make the pipeline fail based on the audit scores.

For example, the Google Lighthouse audit `no-vulnerable-libraries` produces a boolean score that will be equal to 1 if there are no known vulnerabilities within client-side JavaScript libraries and frameworks detected on a web site.
This is an example of a rule for this audit:

```
no-vulnerable-libraries = 1
```

Which means that you expect the audit `no-vulnerable-libraries` to have a score equal to `1`.

You can also use the `>` (greater than) and the `<` (lower than) operator to evaluate decimal audit scores.
Audit rules must be written on separate lines.

![Lighthouse task](https://raw.githubusercontent.com/gsoft-inc/azure-pipelines-lighthouse/master/docs/lh-task.png)

## Installation

Lighthouse for Azure Pipelines is not yet available on the Visual Studio Marketplace.

## Current audits

TODO

## Compiling

There are GitHub actions that take care of compiling, packaging and publishing the extension.

## License

Copyright Â© 2020, Groupe GSoft Inc. This code is licensed under the Apache License, Version 2.0. You may obtain a copy of this license at https://github.com/gsoft-inc/azure-pipelines-lighthouse/blob/master/LICENSE.
